function testWebP(e){var t=new Image;t.onload=t.onerror=function(){e(2==t.height)},t.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(e){1==e?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));let btnAddToFav,btnRemFromFav,elemForm=document.getElementById("elemForm"),page_link=document.getElementsByClassName("page-link"),current=document.getElementsByClassName("current"),listFilmPlaceholder=document.getElementById("listFilmPlaceholder"),pagination_placeholder=document.getElementById("pagination_placeholder"),page=1;const MAIN_DIV=document.querySelector(".main");function setNumPage(e){"A"==e.target.tagName&&(page=current[0].innerText,console.log(page),sendRequest())}function sendRequest(){listFilmPlaceholder.innerHTML="";let e=document.getElementById("titleFilm").value,t=document.getElementById("typeFilm").value;fetch(`http://www.omdbapi.com/?s=${e}&type=${t}&page=${page}&apikey=4ccb7b7e`).then(e=>e.json()).then(e=>{if(console.log(e),"False"==e.Response){let e=document.createElement("p");return e.innerText="Movie not found!",void listFilmPlaceholder.appendChild(e)}{let n=document.createElement("ol");n.classList.add("listFilmPlaceholder__list"),console.log(e.Search),listFilm=e.Search;for(let i in listFilm){let o=document.createElement("img"),a=document.createElement("p"),d=document.createElement("li"),m=10*(page-1)+parseInt(i)+1;d.setAttribute("value",""+m),d.setAttribute("class",m+" listFilmPlaceholder__list_li");document.getElementById(""+m);o.className="listFilmPlaceholder__img",o.src=e.Search[i].Poster;let s=e.Search[i].Title,c=e.Search[i].Type,r=e.Search[i].Year;for(let e in listFilm[i])d.appendChild(a),a.innerText=`${m}. Title : ${s}; \n            Type: ${c}; \n            Year: ${r};`,d.appendChild(o);function t(){!0!==id.includes(listFilm[i].imdbID)?(btnAddToFav=document.createElement("button"),btnAddToFav.style.display="block",btnAddToFav.classList.add("button","button_act"),btnAddToFav.innerText="add to favorite",d.appendChild(btnAddToFav),d.onmouseleave=()=>{btnAddToFav.remove()},btnAddToFav.onclick=()=>{listFavFilmPlaceholder.innerHTML="",id.push(""+listFilm[i].imdbID),console.log(id),favFilmsList.setId(id),btnAddToFav.style.display="none",d.onmouseleave=()=>{btnRemFromFav.remove()},l()}):l()}function l(){btnRemFromFav=document.createElement("button"),btnRemFromFav.style.display="block",btnRemFromFav.classList.add("button","button_act","invert"),btnRemFromFav.innerText="remove from favorite",d.appendChild(btnRemFromFav),d.onmouseleave=()=>{btnRemFromFav.remove()},btnRemFromFav.onclick=()=>{let e=id.indexOf(""+listFilm[i].imdbID);id.splice(e,1),console.log(id),favFilmsList.setId(id),btnRemFromFav.style.display="none",t(),d.onmouseleave=()=>{btnAddToFav.remove()}}}n.appendChild(d),d.onmouseenter=t}if(listFilmPlaceholder.appendChild(n),1!==page)return;$((function(){$(pagination_placeholder).pagination({items:e.totalResults,itemsOnPage:listFilm.length,cssStyle:"light-theme"})}))}})}document.body.addEventListener("click",setNumPage),elemForm.onsubmit=e=>{e.preventDefault(),sendRequest()};let id=[],favFilmsList={storage:null,setId(e){this.storage.setItem("id",JSON.stringify(e))},getId(){return JSON.parse(this.storage.getItem("id"))}};favFilmsList.storage=window.localStorage;let listFavFilmPlaceholder=document.getElementById("listFavFilmPlaceholder"),btnShowFav=document.createElement("button");btnShowFav.innerText="show selected films",MAIN_DIV.appendChild(btnShowFav),btnShowFav.classList.add("button"),btnShowFav.onclick=()=>{if(listFavFilmPlaceholder.innerHTML="",id.length<1){let e=document.createElement("p");e.innerText="You have not favorite movies!",listFavFilmPlaceholder.appendChild(e)}else{let e=document.createElement("ol");e.classList.add("listFilmPlaceholder__show");for(let t of id){fetch(`http://www.omdbapi.com/?i=${t}&apikey=4ccb7b7e`).then(e=>e.json()).then(t=>{listFavFilm=t;let l=document.createElement("li");l.innerText=`${listFavFilm.Title} ,  ${listFavFilm.Year};`,e.appendChild(l),listFavFilmPlaceholder.appendChild(e)})}}};